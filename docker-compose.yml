services:
  l4d2-panel:
    build: .
    container_name: l4d2-panel
    restart: unless-stopped
    # 必要的系统权限，用于支持 screen 和调试
    cap_add:
      - SYS_PTRACE
    security_opt:
      - apparmor:unconfined
    ports:
      - "27020:27020"       # 网页管理面板
      - "27015:27015/tcp"   # 游戏主端口 TCP
      - "27015:27015/udp"   # 游戏主端口 UDP
    environment:
      # 请修改下面的登录密码
      - PANEL_USER=admin
      - PANEL_PASSWORD=password123
      - TZ=Asia/Shanghai
    volumes:
      # 1. 映射 SteamCMD 数据（方便更新）
      - /root/docker-apps/l4d2/steamcmd:/home/steam/steamcmd
      
      # 2. 核心映射：将脚本提取出来的游戏文件，挂载到容器内
      - /root/docker-apps/l4d2/serverfiles:/home/steam/l4d2server